name: Test Runner

on:
  workflow_dispatch:

jobs:
  test-runner:
    runs-on: [self-hosted, k3s, arm64]
    steps:
      - name: Check runner environment
        run: |
          echo "Runner is working!"
          echo "Hostname: $(hostname)"
          echo "User: $(whoami)"
          uname -a
          
      - name: Test Docker access
        run: docker version
        
      - name: Test kubectl access
        run: |
          kubectl version --client
          kubectl get nodes
          kubectl get pods -A
          
      - name: Test GHCR authentication
        run: |
          echo "Checking GHCR secrets..."
          kubectl get secret ghcr-secret -n openclaw
          kubectl get secret ghcr-secret -n default
